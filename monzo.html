<html>
  <head>
    <script src="test-data.js"></script>
    <script src="monzo.js"></script>
    <script>
      window.onload = function () {
        const GOAL = 250000;
        const PLEDGE_VALUES = [10,20,50,100,250,500,1000];
        const TEST_DATA = PD.sample(PLEDGE_VALUES, 10000, true, [7,6,5,4,3,2,1]);

        monzo.initialiseVariables(GOAL, PLEDGE_VALUES, TEST_DATA);

        document.getElementById("pledged").innerHTML = monzo.getAllPledgesTotal();

        document.getElementById("calculate").onclick = function () {
          monzo.chooseSuccessfulApplicants();
          document.getElementById("chosen").innerHTML = monzo.getRunningTotal();
        };

        document.getElementById("recalculate").onclick = function () {
          var percentage = document.getElementById("failed").value;
          monzo.removeFailedApplicants(percentage / 100);
          monzo.repopulateSuccessfulApplicants();
          document.getElementById("pledged").innerHTML = monzo.getAllPledgesTotal();
          document.getElementById("chosen").innerHTML = monzo.getRunningTotal();
        };
      }
    </script>
  </head>

  <body>
    <h1>Monzo Crowdfund</h1>

    <h2>Pledged</h2>
    <p id="pledged"></p>

    <h2>Chosen</h2>
    <p id="chosen">???</p>
    <button id="calculate" type="button">Calculate</button>

    <p>
      <label for="failed">Percentage of failed pledges:</label>
      <input id="failed" type="text" />
      <button id="recalculate" type="button">Recalculate</button>
    </p>
  </body>
</html>
